(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{VFro:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n("2kYt");var r=n("EM62"),o=n("81ol"),i=n("ROBh"),a=n("4e/d"),s=n("pJFc"),c=n("vobO");let l=(()=>{class e{constructor(e,t,n){this.http=e,this.baseUrl=t,this.configQuery=n,this.baseUrl=`${this.configQuery.apiHost}${this.baseUrl}`}audit(e){return console.debug("sending off cancellation of type: "+e),this.http.put(`${this.baseUrl}/audit/cancel?type=${e}`,{}).pipe(Object(a.a)(()=>this.handleAuditError(s.a.UnableToCallAuditEndpoint)))}handleAuditError(e){return console.error(e),Object(i.a)(!0)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(c.b),r.Zb("EXCHANGE BASE URL"),r.Zb(o.b))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},q6bj:function(e,t,n){"use strict";n.d(t,"i",(function(){return c})),n.d(t,"f",(function(){return N})),n.d(t,"b",(function(){return R})),n.d(t,"p",(function(){return P})),n.d(t,"e",(function(){return S})),n.d(t,"g",(function(){return E})),n.d(t,"j",(function(){return L})),n.d(t,"d",(function(){return m})),n.d(t,"n",(function(){return Q})),n.d(t,"o",(function(){return Z})),n.d(t,"k",(function(){return j})),n.d(t,"l",(function(){return A})),n.d(t,"m",(function(){return O})),n.d(t,"c",(function(){return q})),n.d(t,"h",(function(){return D})),n.d(t,"a",(function(){return l})),n("2kYt");var r=n("XzLU"),o=n("pJFc"),i=n("EM62");const a={relyingParty:{consent:o.k.Required},integration:{login:o.k.NotRequired,consent:o.k.NotRequired},identityProvider:{selection:o.k.Required,login:o.k.Required},attribute:{selection:o.k.NotRequired}};let s=(()=>{let e=class extends r.d{constructor(){super(a)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([Object(r.e)({name:"navigation state",resettable:!0})],e),e})(),c=(()=>{class e extends r.b{constructor(e){super(e),this.store=e}getFlow(e){switch(e){case"IdentityProviderLogin":return this.identityProviderLoginState;case"IdentityProviderSelection":return this.identityProviderSelectionState;case"RelyingPartyConsent":return this.relyingPartyConsentState;case"AttributeSelection":return this.attributeProviderSelectionState;case"ConnectorConsent":return this.connectorConsentState;default:return null}}get successfulIdpLogin(){return!(this.identityProviderLoginState!==o.k.Completed&&this.identityProviderLoginState!==o.k.NotRequired)}get relyingPartyConsentState(){return this.getValue().relyingParty.consent}get identityProviderSelectionState(){return this.getValue().identityProvider.selection}get identityProviderLoginState(){return this.getValue().identityProvider.login}get attributeProviderSelectionState(){return this.getValue().attribute.selection}get connectorConsentState(){return this.getValue().integration.consent}get connectorLoginState(){return this.getValue().integration.login}get isInIntegrationFlow(){return this.connectorLoginState!==o.k.NotRequired||this.connectorConsentState!==o.k.NotRequired}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(s))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=function(e){return e.InitialAuthorisation="/authorisation",e.StandardRpAuthorisation="/authorisation/standard-rp",e.LinkableRpAuthorisation="/authorisation/linkable-rp",e.ChooseIdentityProvider="/choose-identity-provider",e.SelectIdentityProvider="/choose-identity-provider/selection",e.LoginToIdentityProvider="/choose-identity-provider/login",e.CancelIdentityProvider="/choose-identity-provider/cancel",e.ConnectorEntry="/connector",e.ConnectorReturnFromIdp="/connector",e.ConnectorLogin="/connector/login",e.ConnectorIdpInfo="/connector/connect-idp",e.ConnectorLinkInfo="/connector/connect-mygov",e.ConnectorRpConsentInfo="/connector/rp-consent",e.CancelConnector="/connector/cancel",e.LinkableRpConsent="/link-consent",e.LinkableSubmitConsent="/link-consent/return",e.Error="/error",e.ErrorEntry="/error",e.ErrorDisplay="/error/display",e.ErrorReturn="/error/return",e.ErrorRedirect="/error/redirect",e.ErrorAssuranceLevels="/error/assurance-levels",e.ChooseBusiness="/choose-business",e.CancelChooseBusiness="/choose-business/cancel",e.InitiateAttributeSelection="/choose-business/selection",e.RelyingPartyConsent="/consent/share-rp",e.StepUp="/authorisation/step-up",e.InitiateConsent="/consent",e.InitiateLinkableConsent="/link-consent",e.ProvideLinkableConsent="/link-consent/submit",e.ProvideConsent="/consent/submit",e.ReturnFromConsent="/consent/return",e.Timeout="/timeout",e.TimeoutReturn="/timeout/return",e.RpConsentCancel="/consent/cancel",e.LinkableConsentCancel="/link-consent/cancel",e}({}),u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let d=(()=>{class e{constructor(e){this.store=e}updateAttributeProviderSelection(e){const t=Object.assign({},this.store.getValue().attribute);t.selection=e,this.store.update(()=>({attribute:t}))}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(s))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([Object(r.f)("Update Attribute Provider Selection"),u("design:type",Function),u("design:paramtypes",[String]),u("design:returntype",void 0)],e.prototype,"updateAttributeProviderSelection",null),e})();var v=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let h=(()=>{class e{constructor(e){this.store=e}updateIdentityProviderSelection(e){const t=Object.assign({},this.store.getValue().identityProvider);t.selection=e,this.store.update(()=>({identityProvider:t}))}updateIdentityProviderLogin(e){const t=Object.assign({},this.store.getValue().identityProvider);t.login=e,this.store.update(()=>({identityProvider:t}))}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(s))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),v([Object(r.f)("Update Identity Provider Selection"),f("design:type",Function),f("design:paramtypes",[String]),f("design:returntype",void 0)],e.prototype,"updateIdentityProviderSelection",null),v([Object(r.f)("Update Identity Provider Login"),f("design:type",Function),f("design:paramtypes",[String]),f("design:returntype",void 0)],e.prototype,"updateIdentityProviderLogin",null),e})();var g=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let y=(()=>{class e{constructor(e){this.store=e}updateIntegrationLogin(e){const t=Object.assign({},this.store.getValue().integration);t.login=e,this.store.update(()=>({integration:t}))}updateIntegrationConsent(e){const t=Object.assign({},this.store.getValue().integration);t.consent=e,this.store.update(()=>({integration:t}))}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(s))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),g([Object(r.f)("Update Integration Login"),p("design:type",Function),p("design:paramtypes",[String]),p("design:returntype",void 0)],e.prototype,"updateIntegrationLogin",null),g([Object(r.f)("Update Integration Consent"),p("design:type",Function),p("design:paramtypes",[String]),p("design:returntype",void 0)],e.prototype,"updateIntegrationConsent",null),e})();var b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let C=(()=>{class e{constructor(e){this.store=e}updateRelyingPartyConsent(e){const t=Object.assign({},this.store.getValue().relyingParty);t.consent=e,this.store.update(()=>({relyingParty:t}))}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(s))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([Object(r.f)("Update Relying Party Consent"),b("design:type",Function),b("design:paramtypes",[String]),b("design:returntype",void 0)],e.prototype,"updateRelyingPartyConsent",null),e})();var k=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let N=(()=>{class e{constructor(e,t,n,r,o){this.store=e,this.rp=t,this.idp=n,this.attr=r,this.integrate=o}resetStore(){this.store.reset()}updateRp(e,t){switch(e){case"consent":this.rp.updateRelyingPartyConsent(t);break;default:throw new Error("Unknown Flow Type")}}updateIdp(e,t){switch(e){case"selection":this.idp.updateIdentityProviderSelection(t);break;case"login":this.idp.updateIdentityProviderLogin(t);break;default:throw new Error("Unknown Flow Type")}}updateAp(e,t){switch(e){case"selection":this.attr.updateAttributeProviderSelection(t);break;default:throw new Error("Unknown Flow Type")}}updateIntegration(e,t){switch(e){case"consent":this.integrate.updateIntegrationConsent(t);break;case"login":this.integrate.updateIntegrationLogin(t);break;default:throw new Error("Unknown Flow Type")}}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(s),i.Zb(C),i.Zb(h),i.Zb(d),i.Zb(y))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([Object(r.f)("Reset Store"),k("design:type",Function),k("design:paramtypes",[]),k("design:returntype",void 0)],e.prototype,"resetStore",null),e})();var I=n("42YS"),w=n("sEIs");let R=(()=>{class e{constructor(e,t,n){this.router=e,this.authQuery=t,this.flowQuery=n}resolveNavigation(e){switch(e){case l.StandardRpAuthorisation:this.resolveStandardRpNavigation();break;case l.LinkableRpAuthorisation:this.resolveLinkableRpNavigation();break;default:this.resolveError()}}resolveError(){this.finaliseNavigation(l.Error)}resolveStandardRpNavigation(){console.debug("inside authorisation.navigation.ts"),console.debug(this.flowQuery.getValue()),this.authQuery.isAuthenticatedSso?(console.debug("hey sso is a thing"),this.finaliseNavigation(this.flowQuery.attributeProviderSelectionState===o.k.Required?l.ChooseBusiness:l.InitiateConsent)):this.finaliseNavigation(this.flowQuery.identityProviderSelectionState===o.k.NotRequired?l.LoginToIdentityProvider:l.ChooseIdentityProvider)}resolveLinkableRpNavigation(){this.finaliseNavigation(this.authQuery.isAuthenticatedSso?l.ConnectorLinkInfo:l.ConnectorEntry)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(w.e),i.Zb(I.b),i.Zb(c))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),P=(()=>{class e{constructor(e,t){this.router=e,this.flowQuery=t}resolveNavigation(e){switch(e){case l.StepUp:this.resolveStepUpNavigation();break;default:this.resolveError()}}resolveStepUpNavigation(){this.finaliseNavigation(this.flowQuery.connectorConsentState!==o.k.NotRequired?l.ConnectorReturnFromIdp:this.flowQuery.attributeProviderSelectionState===o.k.Required?l.ChooseBusiness:l.InitiateConsent)}resolveError(){this.finaliseNavigation(l.Error)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(w.e),i.Zb(c))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),S=(()=>{class e{constructor(e,t){this.flowQuery=e,this.router=t}resolveNavigation(e){switch(e){case l.InitiateConsent:this.resolveConsentEntryNavigation();break;case l.ProvideConsent:this.resolveConsentResolution();break;default:this.resolveError()}}resolveError(){this.finaliseNavigation(l.Error)}resolveConsentResolution(){this.flowQuery.relyingPartyConsentState===o.k.Completed&&this.finaliseNavigation(l.ReturnFromConsent)}resolveConsentEntryNavigation(){this.flowQuery.relyingPartyConsentState===o.k.NotRequired&&this.finaliseNavigation(l.ReturnFromConsent),this.finaliseNavigation(this.flowQuery.relyingPartyConsentState===o.k.Required||this.flowQuery.attributeProviderSelectionState===o.k.Completed?l.ProvideConsent:l.ReturnFromConsent)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(c),i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),E=(()=>{class e{constructor(e,t){this.flowQuery=e,this.router=t}resolveNavigation(e){switch(e){case l.ChooseBusiness:this.resolveAttributeSelectionEntryNavigation();break;default:this.resolveError()}}resolveAttributeSelectionEntryNavigation(){this.finaliseNavigation(this.flowQuery.attributeProviderSelectionState===o.k.Required?l.InitiateAttributeSelection:l.InitiateConsent)}resolveError(){}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(c),i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),L=(()=>{class e{constructor(e,t){this.flowQuery=e,this.router=t}resolveNavigation(e){switch(console.debug("resolving IDP navigation"),e){case l.ChooseIdentityProvider:this.resolveIdpEntryNavigation();break;default:this.resolveError()}}resolveIdpEntryNavigation(){this.flowQuery.identityProviderSelectionState===o.k.Required?(console.debug("we need to select some IDPs"),this.finaliseNavigation(l.SelectIdentityProvider)):this.flowQuery.identityProviderLoginState===o.k.Required&&(console.debug("we need to login to our IDP"),this.finaliseNavigation(l.LoginToIdentityProvider))}resolveError(){this.finaliseNavigation(l.Error)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(c),i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),m=(()=>{class e{constructor(e,t){this.flowQuery=e,this.router=t}resolveNavigation(e){switch(e){case l.ConnectorEntry:this.resolveNewEntryNavigation();break;default:this.resolveError()}}resolveNewEntryNavigation(){switch(this.flowQuery.identityProviderLoginState){case o.k.Completed:case o.k.NotRequired:this.resolvePostIdpNavigation();break;default:this.finaliseNavigation(l.ConnectorIdpInfo)}}resolvePostIdpNavigation(){switch(this.flowQuery.connectorConsentState){case o.k.Required:this.finaliseNavigation(this.flowQuery.connectorLoginState===o.k.Completed?l.InitiateLinkableConsent:l.ConnectorLinkInfo);break;case o.k.NotRequired:case o.k.Completed:this.resolvePostLinkNavigation();break;default:this.finaliseNavigation(l.ConnectorIdpInfo)}}resolvePostLinkNavigation(){this.finaliseNavigation(l.ConnectorRpConsentInfo)}resolvePostLinkConsentNavigation(){this.finaliseNavigation(l.ConnectorIdpInfo)}resolveEntryNavigation(){this.finaliseNavigation(this.flowQuery.identityProviderLoginState===o.k.Completed||this.flowQuery.identityProviderLoginState===o.k.NotRequired?l.ConnectorLinkInfo:this.flowQuery.connectorLoginState===o.k.Completed?this.flowQuery.connectorConsentState===o.k.Completed?l.ConnectorRpConsentInfo:l.LinkableRpConsent:l.ConnectorIdpInfo)}resolveError(){this.finaliseNavigation(l.Error)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(c),i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Q=(()=>{class e{constructor(e,t){this.flowQuery=e,this.router=t}resolveNavigation(e){switch(e){case l.InitiateLinkableConsent:this.resolveLinkableConsentEntryNavigation();break;case l.ProvideLinkableConsent:this.resolveProvideConsent();break;default:this.resolveError()}}resolveProvideConsent(){this.flowQuery.connectorConsentState===o.k.InProgress&&this.finaliseNavigation(l.LinkableSubmitConsent)}resolveLinkableConsentEntryNavigation(){this.finaliseNavigation(l.ProvideLinkableConsent)}resolveError(){this.finaliseNavigation(l.Error)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(c),i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Z=(()=>{class e{constructor(e){this.router=e}resolveNavigation(e){switch(e){case l.ProvideLinkableConsent:this.resolveReturnNavigation();break;default:this.resolveError()}}resolveReturnNavigation(){this.finaliseNavigation(l.ConnectorEntry)}resolveError(){this.finaliseNavigation(l.Error)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),j=(()=>{class e{constructor(e,t){this.flowQuery=e,this.router=t}resolveNavigation(e){switch(e){case l.ConnectorIdpInfo:this.resolveIdpNavigation();break;default:this.resolveError()}}resolveIdpNavigation(){this.finaliseNavigation(l.ChooseIdentityProvider)}resolveError(){this.finaliseNavigation(l.Error)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(c),i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),A=(()=>{class e{constructor(e,t){this.flowQuery=e,this.router=t}resolveNavigation(e){switch(e){case l.ConnectorLinkInfo:this.resolveLinkNavigation();break;default:this.resolveError()}}resolveLinkNavigation(){this.flowQuery.connectorLoginState===o.k.Required||this.flowQuery.connectorLoginState===o.k.InProgress?this.finaliseNavigation(l.ConnectorLogin):this.flowQuery.connectorConsentState!==o.k.Required&&this.flowQuery.connectorConsentState!==o.k.InProgress||this.finaliseNavigation(l.LinkableRpConsent)}resolveError(){this.finaliseNavigation(l.Error)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(c),i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),O=(()=>{class e{constructor(e,t){this.flowQuery=e,this.router=t}resolveNavigation(e){switch(e){case l.ConnectorRpConsentInfo:this.resolveRpNavigation();break;default:this.resolveError()}}resolveRpNavigation(){this.finaliseNavigation(l.InitiateConsent)}resolveError(){this.finaliseNavigation(l.Error)}finaliseNavigation(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(c),i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),q=(()=>{class e{constructor(e){this.router=e}resolveNavigation(e,t){switch(e){case l.Timeout:this.resolveTimeoutCancel(t);break;case l.ChooseIdentityProvider:this.resolveChooseIdpCancel(t);break;case l.InitiateAttributeSelection:this.resolveChooseBusinessCancel(t);break;case l.ConnectorIdpInfo:case l.ConnectorLinkInfo:case l.ConnectorRpConsentInfo:this.resolveConnectorCancel(t);break;case l.ProvideConsent:case l.ReturnFromConsent:case l.InitiateConsent:this.resolveRpConsentCancel(t);break;case l.ProvideLinkableConsent:case l.InitiateLinkableConsent:this.resolveLinkableConsentCancel(t);break;default:this.resolveError()}}resolveTimeoutCancel(e){this.finaliseNavigation(l.TimeoutReturn,e)}resolveConnectorCancel(e){this.finaliseNavigation(l.CancelConnector,e)}resolveChooseBusinessCancel(e){this.finaliseNavigation(l.CancelChooseBusiness,e)}resolveChooseIdpCancel(e){this.finaliseNavigation(l.CancelIdentityProvider,e)}resolveRpConsentCancel(e){this.finaliseNavigation(l.RpConsentCancel,e)}resolveLinkableConsentCancel(e){this.finaliseNavigation(l.LinkableConsentCancel,e)}resolveError(){this.finaliseNavigation(l.Error,o.d.Unknown)}finaliseNavigation(e,t){this.router.navigate([e],{queryParams:{context:t}})}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(w.e))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=n("ke9K"),F=n("VFro");let D=(()=>{class e{constructor(e,t,n,r,o,i,a){this.idpStateService=e,this.errorQuery=t,this.flowQuery=n,this.flowService=r,this.router=o,this.auditService=i,this.cancelNavigation=a}resolveNavigation(e){switch(e){case l.ErrorEntry:case l.Error:case l.ErrorRedirect:this.resolveErrorNavigation();break;default:this.resolveError()}}resolveError(){this.finaliseNavigation(l.ErrorDisplay)}resolveErrorNavigation(){this.errorQuery.isUriError?this.resolveUriError():this.errorQuery.isApiError?this.resolveApiError():this.resolveError()}resolveAuthenticationCancelledError(){this.flowQuery.identityProviderLoginState===o.k.InProgress?this.resolveIdpAuthCancelError():this.finaliseNavigation(l.ErrorDisplay,{authentication_cancelled:!0})}resolveAccessDeniedError(){this.flowQuery.connectorLoginState===o.k.InProgress?(this.idpStateService.regenerateAuthId(),this.finaliseNavigation(l.ConnectorEntry,{access_denied:!0})):this.finaliseNavigation(l.ErrorDisplay,{access_denied:!0})}resolveBusinessCancelledError(){this.cancelNavigation.resolveNavigation(l.InitiateAttributeSelection,o.d.AuthenticationCancelled)}resolveUriError(){if(this.errorQuery.uriType)switch(this.errorQuery.uriType){case o.d.AuthenticationCancelled:this.resolveAuthenticationCancelledError();break;case o.d.AccessDenied:this.resolveAccessDeniedError();break;case o.d.BusinessCancelled:this.resolveBusinessCancelledError();break;default:this.finaliseNavigation(l.ErrorDisplay)}else this.finaliseNavigation(l.ErrorDisplay)}resolveIdpAuthCancelError(){this.auditService.audit("idp_auth").subscribe(()=>{this.idpStateService.resetStore(),this.flowService.updateIdp("selection",o.k.Required),this.flowService.updateIdp("login",o.k.Required),this.finaliseNavigation(l.ChooseIdentityProvider,{authentication_cancelled:!0})})}resolveApiError(){this.finaliseNavigation(l.ErrorDisplay)}finaliseNavigation(e,t){t&&this.router.navigate([e],{queryParams:t}),this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(U.h),i.Zb(U.e),i.Zb(c),i.Zb(N),i.Zb(w.e),i.Zb(F.a),i.Zb(q))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);